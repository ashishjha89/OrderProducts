# AWS Account Setup

## Initial setup as Root User

- Enable MFA.
- Set default region (to Ireland).
- Set budget and budget alerts (e.g. budget for monthly $10).
- Enable IAM Identity Center
  - Check "Enable access to IAM Identity Center for member accounts in your organization"
- Create new user within IAM Identity center (with MFA) - e.g. ashishjha (and not ashishjha-dev)
  - This will result in email being sent to user's email address where they can setup their password and setup MFA.
  - Enable “Provide user access to the AWS Management Console”.
  - Give them "AdministratorAccess" permission.
  - Note: there is no need to create "Group".
- Assign the user to to "Root" user account (by going through "Add Users" flow in Root account).
- **NOTE**: Now onwards, you should never use root account, and only use newly created IAM user, as they have been granted Admin permission & Console permission.

## Verify as IAM user

- Login via IAM user to verify if user can see budget, Console, etc.

## Configure AWS CLI

- Install `AWS CLI` in your laptop.
- Login via IAM User, go to "IAM Dashboard" and note
  - AWS access portal URL (e.g. <https://d-9367921095.awsapps.com/start>)
  - Region (e.g. eu-west-1)
  - Copy account id (e.g. 039596174447)
- In your laptop, now do:  `aws configure sso`, fill details as below:

```bash
[profile ashishjha-admin]
sso_session = ashishjha-sso
sso_account_id = 039596174447
sso_role_name = AdministratorAccess
region = eu-west-1
[sso-session ashishjha-sso]
sso_start_url = https://d-9367921095.awsapps.com/start
sso_region = eu-west-1
sso_registration_scopes = sso:account:access
```

- Make default

```bash
export AWS_PROFILE=ashishjha-admin
```
